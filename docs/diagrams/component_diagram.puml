@startuml
' — Parámetros de estilo para un look profesional —
skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica Neue"
skinparam defaultFontSize 14
skinparam roundCorner 10
skinparam shadowing false

skinparam packageBackgroundColor #F8F8F8
skinparam packageBorderColor #34495E
skinparam packageFontColor #2C3E50

skinparam componentBackgroundColor #FFFFFF
skinparam componentBorderColor #2C3E50
skinparam componentFontColor #2C3E50

skinparam folderBackgroundColor #ECF0F1
skinparam folderBorderColor #34495E
skinparam folderFontColor #2C3E50

' Disposición de izquierda a derecha
left to right direction

' Definición de paquetes y componentes

package "data/raw" as RawData {
  folder "CSV / Archivos Brutos" 
}

package "Database\n(PostgreSQL + Docker)" as DB {
  component "docker-compose.yml" as Compose
  component "PostgreSQL (Docker)"    as Postgres
}

package "src/ingestion" as IngestPkg {
  [Ingestión de Datos] as Ingest
}

package "src/cleaning" as CleanPkg {
  [Limpieza de Datos] as Clean
}

package "src/analysis" as AnalysisPkg {
  [EDA y Tendencias] as Analysis
}

package "src/modeling" as ModelingPkg {
  [Modelado Series Temporales] as Modeling
}

package "src/visualization" as VizPkg {
  [Generador de Gráficos] as Plots
  [Renderer de Dashboard]     as Dash
}

package "dashboards/interactive_dashboard" as DashAppPkg {
  component "App Streamlit / Dash" as DashboardApp
}

package "src/utils" as UtilsPkg {
  [Helpers (I/O, Logging, Config)] as Utils
}

' Flujo de datos y dependencias

RawData --> Ingest        : leer CSV
Ingest --> Postgres       : cargar datos crudos
Postgres --> Clean        : leer datos crudos
Clean --> Postgres        : escribir datos limpios
Postgres --> Analysis     : leer datos limpios
Analysis --> Modeling     : extraer series / features
Modeling --> Postgres     : almacenar predicciones
Postgres --> Plots        : leer datos para gráficas
Plots --> Dash            : construir componentes
Dash --> DashboardApp     : renderizar UI

' Conexión de Docker Compose
Compose --> Postgres      : configuración del contenedor

' Dependencias transversales de utilidades
Utils <..> Ingest
Utils <..> Clean
Utils <..> Analysis
Utils <..> Modeling
Utils <..> Plots
Utils <..> Dash
Utils <..> DashboardApp
@enduml
